<%= form_for(order) do |f| %>
  <% if order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(order.errors.count, "error") %> prohibited this order from being saved:</h2>

      <ul>
      <% order.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
    <div ng-controller="SearchUserCrtl">
    <div class="field">
      <%= f.label :ผู้ซื้อ %>
      <select class="user_selected"name="order[purchaser_id]" id="order_purchaser_id" onchange='javascript:changeTextfield(this)' >
        <option value="0" selected="selected" disabled>เลือกผู้ซื้อ</option>
        <option ng-repeat="user in users" value="{{user.id}}">
          {{user.first_name + " " + user.last_name + " " + user.email}}
        </option>
      </select>
    </div>

    <div class="field">
      <label class="header" for="order_รายการสินค้า">รายการสินค้า</label>
      <label class="header" for="order_quantity">Quantity</label>
      <label class="header" for="order_price">Price</label>
      <label class="header" for="order_pv">Pv</label>
    </div>

    <div class="field" id="productlist">
      <div class="field" id="row_1">
        <select class="rowelem" name="list[product1[id]]" id="list_product1_id" onchange="javascript:changeSelection(this)">
          <option value="0">กรุณาเลือกสินค้า</option><%= options_from_collection_for_select(@products, "id", "name") %>
        </select>
        <input type="number" class="rowelem" name="list[product1[quantity]]" id="list_product1_quantity" value="0" onchange="javascript:changeQuantity(this)" onfocus="javascript:storePreviousValue(this)">
        <input type="number" class="rowelem" name="list[product1[price]]" id="list_product1_price" value="0">
        <input type="number" class="rowelem" name="list[product1[pv]]" id="list_product1_pv" value="0">
      </div>
    </div>
    
    <%= button_tag "new", :type => "button", :onclick => "javascript:addRow()" %>
  
    <div class="field">
      <%= f.label :total_price %>
      <%= f.text_field :total_price, :value => "0", :type => "number" %>
    </div>
  
    <div class="field">
      <%= f.label :total_pv %>
      <%= f.text_field :total_pv, :value => "0", :type => "number" %>
    </div>
  
    <div class="actions">
      <%= f.submit %>
    </div>
    </div>
    </tbody>
  </table>
<% end %>
